<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">

$(document).ready(function(){
  google.charts.load('current', {packages: ['corechart', 'line']});
  google.charts.setOnLoadCallback(getData);

  $("#refresh").click(getData);
});

function getData() {
  $.get("/data", function(data){
    data = data.measurements;
    dateData = [];

    for (i=0;i<data.length;i++) {
      var k = new Date(data[i][0]*1000);
      var v = data[i][1];
      dateData.push([k, v]);
    }
    drawBasic(dateData);
    var now = new Date();
    var tstamp = dateData[dateData.length-1][0].getTime();
    var diff = (now.getTime() - tstamp)/1000;
    $("#tstamp").html(diff+" secs ago: ");
    $("#temp").html(dateData[dateData.length-1][1]);
  })
}

function drawBasic(entries) {
  var data = new google.visualization.DataTable();
  data.addColumn('date', 'X');
  data.addColumn('number', 'Y');

  data.addRows(entries);

  var options = {
    height: 400,
    hAxis: {
      format: 'd HH:mm',
      title: 'Time'
    },
    vAxis: {
      title: 'Temperature'
    }
  };
  var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}
</script>
<style>
  #temp { display: inline-block; }
</style>
<label id="tstamp"></label><div id="temp">XX</div>
<button id="refresh">refresh</button>
<div id="chart_div"></div>
  